#!/usr/bin/env bash


cd $(pwd)/../etc

# Drop database and current set of data.
npx sequelize db:drop

# Creates new database; requires "create" privileges on database role specified in etc/config.json.
npx sequelize db:create

# Creates relations in the database based on the src/models.
npx sequelize db:migrate

if [[ "$1" == "empty" ]]
then
    # Seed the database with only the header (minimum requirement).
    npx sequelize db:seed --seed ../seeders/20180000000000-default-header.js
else
    # Seed database with default data.
    npx sequelize db:seed:all
fi
